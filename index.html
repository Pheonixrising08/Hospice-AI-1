<!DOCTYPE html>
<html>
<head>
  <title>Hospice Narrative AI Review</title>
</head>
<body>
  <h1>Hospice Narrative AI Review</h1>
  <form id="dynamicForm"></form>

  <script>
    const formJSON = {
      "title": "Hospice Narrative AI Review",
      "fields": [
        {
          "type": "control_textbox",
          "text": "Submitter Name",
          "name": "submitterName"
        },
        {
          "type": "control_email",
          "text": "Submitter Email",
          "name": "submitterEmail"
        },
        {
          "type": "control_textarea",
          "text": "Narrative Note",
          "name": "narrativeNote"
        },
        {
          "type": "control_textarea",
          "text": "AI Result",
          "name": "aiResult",
          "hidden": true
        }
      ]
    };

    const typeMap = {
      "control_textbox": "text",
      "control_email": "email",
      "control_textarea": "textarea"
    };

    const form = document.getElementById('dynamicForm');

    formJSON.fields.forEach((field, i) => {
      const wrapper = document.createElement('div');
      if (field.hidden) wrapper.style.display = 'none';

      const label = document.createElement('label');
      label.textContent = field.text;
      label.setAttribute('for', field.name);
      wrapper.appendChild(label);

      let input;
      const inputType = typeMap[field.type] || "text";

      if (inputType === "textarea") {
        input = document.createElement('textarea');
      } else {
        input = document.createElement('input');
        input.type = inputType;
      }

      input.name = field.name;
      input.id = field.name;
      wrapper.appendChild(input);

      form.appendChild(wrapper);
      form.appendChild(document.createElement('br'));
    });

    const submit = document.createElement('button');
    submit.type = "submit";
    submit.textContent = "Submit";
    form.appendChild(submit);
  </script>
</body>
</html>
